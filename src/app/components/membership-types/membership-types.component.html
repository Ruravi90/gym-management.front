<header class="main-header">
  <div class="header-info">
    <h1 class="page-title">Tipos de Membres√≠a</h1>
    <p class="page-subtitle">Gestiona los diferentes tipos de planes disponibles</p>
  </div>
  <div class="header-actions">
    <button class="app-btn app-btn-primary" (click)="openNewTypeModal()">
      <span>+</span> Nuevo Tipo
    </button>
  </div>
</header>

<!-- Advanced Filters Area -->
<div class="app-card filters-container">
  <div class="filters-grid">
    <div class="form-group">
      <label>Estado</label>
      <select class="app-input" [(ngModel)]="filters.isActive" (change)="applyFilters()">
        <option value="">Todos los estados</option>
        <option value="true">Activos</option>
        <option value="false">Inactivos</option>
      </select>
    </div>

    <div class="filter-actions">
      <button class="app-btn app-btn-secondary" (click)="clearFilters()">Limpiar Filtros</button>
    </div>
  </div>
</div>

<!-- Table View for Desktop -->
<div class="table-responsive-wrapper desktop-view">
  <table class="app-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Detalles</th>
        <th>Duraci√≥n</th>
        <th>Accesos</th>
        <th>Precio</th>
        <th>Estado</th>
        <th class="text-right">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let type of membershipTypes">
        <td class="id-cell">#{{ type.id }}</td>
        <td class="name-cell">
          <span class="type-name">{{ type.name }}</span>
        </td>
        <td class="details-cell">
          <div class="type-description" *ngIf="type.description">{{ type.description }}</div>
          <div class="type-description empty" *ngIf="!type.description">Sin descripci√≥n</div>
        </td>
        <td class="duration-cell">
          <span class="duration-info" *ngIf="type.duration_days">{{ type.duration_days }} d√≠as</span>
          <span class="duration-info empty" *ngIf="!type.duration_days">Ilimitado</span>
        </td>
        <td class="accesses-cell">
          <span class="accesses-info" *ngIf="type.accesses_allowed !== null">{{ type.accesses_allowed }} accesos</span>
          <span class="accesses-info empty" *ngIf="type.accesses_allowed === null">Ilimitados</span>
        </td>
        <td class="price-cell">
          <span class="price-info">${{ type.price }}</span>
        </td>
        <td class="status-cell">
          <span class="status-badge" [class.active]="type.is_active" [class.inactive]="!type.is_active">
            {{ type.is_active ? 'Activo' : 'Inactivo' }}
          </span>
        </td>
        <td class="actions-cell text-right">
          <div class="action-buttons">
            <button class="btn-action-icon edit" (click)="openEditModal(type)">‚úèÔ∏è</button>
            <button class="btn-action-icon delete" (click)="deleteType(type.id)">üóëÔ∏è</button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Card View for Mobile -->
<div class="cards-container mobile-view" *ngIf="paginatedMembershipTypes.length > 0">
  <div class="membership-type-card" *ngFor="let type of paginatedMembershipTypes">
    <div class="card-header">
      <div class="header-top">
        <div class="type-id">#{{ type.id }}</div>
        <div class="type-name">{{ type.name }}</div>
      </div>
      <div class="header-tags">
        <span class="status-badge" [class.active]="type.is_active" [class.inactive]="!type.is_active">
          {{ type.is_active ? 'Activo' : 'Inactivo' }}
        </span>
      </div>
    </div>

    <div class="card-body">
      <div class="type-details-grid">
        <div class="detail-item">
          <span class="detail-label">Descripci√≥n:</span>
          <div class="detail-value" *ngIf="type.description">{{ type.description }}</div>
          <div class="detail-value empty" *ngIf="!type.description">Sin descripci√≥n</div>
        </div>
        <div class="detail-item">
          <span class="detail-label">Duraci√≥n:</span>
          <div class="detail-value" *ngIf="type.duration_days">{{ type.duration_days }} d√≠as</div>
          <div class="detail-value empty" *ngIf="!type.duration_days">Ilimitado</div>
        </div>
        <div class="detail-item">
          <span class="detail-label">Accesos:</span>
          <div class="detail-value" *ngIf="type.accesses_allowed !== null">{{ type.accesses_allowed }} accesos</div>
          <div class="detail-value empty" *ngIf="type.accesses_allowed === null">Ilimitados</div>
        </div>
        <div class="detail-item">
          <span class="detail-label">Precio:</span>
          <span class="detail-value price-info">${{ type.price }}</span>
        </div>
      </div>
    </div>

    <div class="card-actions">
      <button class="app-btn app-btn-secondary btn-sm" (click)="openEditModal(type)">Editar</button>
      <button class="app-btn app-btn-danger btn-sm" (click)="deleteType(type.id)">Eliminar</button>
    </div>
  </div>
</div>

<!-- Empty state for mobile -->
<div class="empty-state mobile-view" *ngIf="paginatedMembershipTypes.length === 0 && membershipTypes.length > 0">
  <p>No se encontraron tipos de membres√≠a en esta p√°gina</p>
</div>

<div class="empty-state mobile-view" *ngIf="membershipTypes.length === 0">
  <p>No se encontraron tipos de membres√≠a</p>
</div>

<!-- Pagination Controls for Mobile -->
<div class="pagination-controls mobile-view" *ngIf="totalPages > 1">
  <div class="pagination-info">
    P√°gina {{currentPage}} de {{totalPages}}
  </div>
  <div class="pagination-buttons">
    <button class="app-btn app-btn-secondary btn-sm"
            [disabled]="currentPage === 1"
            (click)="prevPage()">
      Anterior
    </button>
    <span class="page-numbers">
      <button *ngFor="let page of getPageNumbers()"
              class="app-btn btn-sm"
              [class.app-btn-primary]="page === currentPage"
              [class.app-btn-secondary]="page !== currentPage"
              (click)="goToPage(page)">
        {{page}}
      </button>
    </span>
    <button class="app-btn app-btn-secondary btn-sm"
            [disabled]="currentPage === totalPages"
            (click)="nextPage()">
      Siguiente
    </button>
  </div>
</div>

<!-- Type Modal -->
<div class="modal-backdrop" *ngIf="showTypeModal">
  <div class="app-card modal-card">
    <div class="modal-header">
      <h3>{{ editingType ? 'Editar Tipo de Membres√≠a' : 'Nuevo Tipo de Membres√≠a' }}</h3>
      <button class="btn-close" (click)="closeTypeModal()">&times;</button>
    </div>
    <div class="modal-body">
      <form (ngSubmit)="saveType()" #typeFormRef="ngForm" class="compact-form">
        <div class="form-group">
          <label>Nombre del Tipo *</label>
          <input type="text" class="app-input" [(ngModel)]="typeForm.name" name="name" required>
        </div>

        <div class="form-group">
          <label>Descripci√≥n</label>
          <textarea class="app-input" [(ngModel)]="typeForm.description" name="description" rows="3"></textarea>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label>Duraci√≥n (d√≠as)</label>
            <input type="number" class="app-input" [(ngModel)]="typeForm.duration_days" name="duration_days" min="0">
            <small class="form-help">Dejar vac√≠o para duraci√≥n ilimitada</small>
          </div>

          <div class="form-group">
            <label>Accesos Permitidos</label>
            <input type="number" class="app-input" [(ngModel)]="typeForm.accesses_allowed" name="accesses_allowed" min="0">
            <small class="form-help">Dejar vac√≠o para accesos ilimitados</small>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label>Precio ($)</label>
            <input type="number" class="app-input" [(ngModel)]="typeForm.price" name="price" required min="0" step="0.01">
          </div>

          <div class="form-group">
            <label>Estado</label>
            <select class="app-input" [(ngModel)]="typeForm.is_active" name="is_active">
              <option [value]="true">Activo</option>
              <option [value]="false">Inactivo</option>
            </select>
          </div>
        </div>

        <div class="modal-actions">
          <button type="button" class="app-btn app-btn-secondary" (click)="closeTypeModal()">Cancelar</button>
          <button type="submit" class="app-btn app-btn-primary" [disabled]="!typeFormRef.form.valid">
            {{ editingType ? 'Actualizar Tipo' : 'Crear Tipo' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>