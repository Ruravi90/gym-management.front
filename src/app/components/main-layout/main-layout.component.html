<div class="dashboard-layout" [class.sidebar-collapsed]="sidebarCollapsed">
  <!-- Mobile toggle button outside sidebar to remain accessible -->
  <button class="mobile-toggle" (click)="toggleSidebar()" *ngIf="isMobileView">
    {{ sidebarCollapsed ? 'â˜°' : 'âœ•' }}
  </button>

  <aside class="sidebar-premium" [class.collapsed]="sidebarCollapsed" [class.mobile-view]="isMobileView">
    <div class="brand-container">
      <div class="logo-circle" (click)="toggleSidebar()">PW</div>
      <span class="brand-text" *ngIf="!sidebarCollapsed">Panther Warriors</span>
    </div>

    <nav class="nav-menu">
      <a routerLink="/dashboard" routerLinkActive="active" class="nav-item" [title]="sidebarCollapsed ? 'EstadÃ­sticas' : ''" (click)="onNavItemClick()">
        <span class="nav-icon">ğŸ“Š</span>
        <span class="nav-label" *ngIf="!sidebarCollapsed">EstadÃ­sticas</span>
      </a>
      <a routerLink="/clients" routerLinkActive="active" class="nav-item" [title]="sidebarCollapsed ? 'Clientes' : ''" (click)="onNavItemClick()">
        <span class="nav-icon">ğŸ‘¥</span>
        <span class="nav-label" *ngIf="!sidebarCollapsed">Clientes</span>
      </a>
      <a routerLink="/admin/users" routerLinkActive="active" class="nav-item" *ngIf="getCurrentUser() && (getCurrentUser()?.role === 'admin' || getCurrentUser()?.role === 'super_admin' || getCurrentUser()?.role === 'receptionist')" [title]="sidebarCollapsed ? 'Usuarios' : ''" (click)="onNavItemClick()">
        <span class="nav-icon">ğŸ‘¤</span>
        <span class="nav-label" *ngIf="!sidebarCollapsed">Usuarios</span>
      </a>
      <a routerLink="/checkin" class="nav-item" [title]="sidebarCollapsed ? 'Check-in Facial' : ''" (click)="onNavItemClick()">
        <span class="nav-icon">ğŸ“·</span>
        <span class="nav-label" *ngIf="!sidebarCollapsed">Check-in Facial</span>
      </a>
      <a routerLink="/memberships" routerLinkActive="active" class="nav-item" [title]="sidebarCollapsed ? 'MembresÃ­as' : ''" (click)="onNavItemClick()">
        <span class="nav-icon">ğŸ’³</span>
        <span class="nav-label" *ngIf="!sidebarCollapsed">MembresÃ­as</span>
      </a>
      <a routerLink="/membership-types" routerLinkActive="active" class="nav-item" *ngIf="getCurrentUser() && (getCurrentUser()?.role === 'admin' || getCurrentUser()?.role === 'super_admin' || getCurrentUser()?.role === 'manager')" [title]="sidebarCollapsed ? 'Tipos de MembresÃ­a' : ''" (click)="onNavItemClick()">
        <span class="nav-icon">ğŸ“‹</span>
        <span class="nav-label" *ngIf="!sidebarCollapsed">Tipos de MembresÃ­a</span>
      </a>
      <a routerLink="/audit-logs" routerLinkActive="active" class="nav-item" *ngIf="getCurrentUser() && (getCurrentUser()?.role === 'admin' || getCurrentUser()?.role === 'super_admin' || getCurrentUser()?.role === 'manager')" [title]="sidebarCollapsed ? 'AuditorÃ­a' : ''" (click)="onNavItemClick()">
        <span class="nav-icon">ğŸ”</span>
        <span class="nav-label" *ngIf="!sidebarCollapsed">AuditorÃ­a</span>
      </a>

      <div class="nav-divider" *ngIf="!sidebarCollapsed">Centro de Control</div>

      <a href="#" class="nav-item disabled" [title]="sidebarCollapsed ? 'Clases' : ''">
        <span class="nav-icon">ğŸ‹ï¸</span>
        <span class="nav-label" *ngIf="!sidebarCollapsed">Clases</span>
      </a>
      <a href="#" class="nav-item disabled" [title]="sidebarCollapsed ? 'Reportes' : ''">
        <span class="nav-icon">ğŸ“ˆ</span>
        <span class="nav-label" *ngIf="!sidebarCollapsed">Reportes</span>
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="status-indicator" *ngIf="!sidebarCollapsed">
        <span class="status-dot">â—</span> Sistema Activo
        <small class="version-text" *ngIf="versionService.currentVersion">v{{ versionService.currentVersion }}</small>
      </div>
      <button class="btn-logout-premium" (click)="logout()" [title]="sidebarCollapsed ? 'Cerrar SesiÃ³n' : ''">
        <span class="logout-icon">ğŸšª</span> 
        <span class="logout-label" *ngIf="!sidebarCollapsed">Cerrar SesiÃ³n</span>
      </button>
    </div>
  </aside>

  <main class="content-area" [class.full-width]="sidebarCollapsed">
    <router-outlet></router-outlet>
  </main>
</div>
